diff -Naur samba-4.3.9.orig/source4/torture/local/nss_tests.c samba-4.3.9/source4/torture/local/nss_tests.c
--- samba-4.3.9.orig/source4/torture/local/nss_tests.c	2015-12-01 08:42:55.000000000 +0000
+++ samba-4.3.9/source4/torture/local/nss_tests.c	2016-05-29 00:52:30.412002243 +0000
@@ -337,48 +337,6 @@
 			       struct passwd **pwd_array_p,
 			       size_t *num_pwd_p)
 {
-	struct passwd pwd, *pwdp;
-	struct passwd *pwd_array = NULL;
-	size_t num_pwd = 0;
-	char buffer[4096];
-	int ret;
-
-	torture_comment(tctx, "Testing setpwent\n");
-	setpwent();
-
-	while (1) {
-		torture_comment(tctx, "Testing getpwent_r\n");
-
-#ifdef SOLARIS_GETPWENT_R
-		ret = getpwent_r(&pwd, buffer, sizeof(buffer));
-#else /* SOLARIS_GETPWENT_R */
-		ret = getpwent_r(&pwd, buffer, sizeof(buffer), &pwdp);
-#endif /* SOLARIS_GETPWENT_R */
-		if (ret != 0) {
-			if (ret != ENOENT) {
-				torture_comment(tctx, "got %d return code\n", ret);
-			}
-			break;
-		}
-		print_passwd(&pwd);
-		if (pwd_array_p && num_pwd_p) {
-			pwd_array = talloc_realloc(tctx, pwd_array, struct passwd, num_pwd+1);
-			torture_assert(tctx, pwd_array, "out of memory");
-			copy_passwd(tctx, &pwd, &pwd_array[num_pwd]);
-			num_pwd++;
-		}
-	}
-
-	torture_comment(tctx, "Testing endpwent\n");
-	endpwent();
-
-	if (pwd_array_p) {
-		*pwd_array_p = pwd_array;
-	}
-	if (num_pwd_p) {
-		*num_pwd_p = num_pwd;
-	}
-
 	return true;
 }
 
@@ -535,48 +493,6 @@
 			      struct group **grp_array_p,
 			      size_t *num_grp_p)
 {
-	struct group grp, *grpp;
-	struct group *grp_array = NULL;
-	size_t num_grp = 0;
-	char buffer[4096];
-	int ret;
-
-	torture_comment(tctx, "Testing setgrent\n");
-	setgrent();
-
-	while (1) {
-		torture_comment(tctx, "Testing getgrent_r\n");
-
-#ifdef SOLARIS_GETGRENT_R
-		ret = getgrent_r(&grp, buffer, sizeof(buffer));
-#else /* SOLARIS_GETGRENT_R */
-		ret = getgrent_r(&grp, buffer, sizeof(buffer), &grpp);
-#endif /* SOLARIS_GETGRENT_R */
-		if (ret != 0) {
-			if (ret != ENOENT) {
-				torture_comment(tctx, "got %d return code\n", ret);
-			}
-			break;
-		}
-		print_group(&grp);
-		if (grp_array_p && num_grp_p) {
-			grp_array = talloc_realloc(tctx, grp_array, struct group, num_grp+1);
-			torture_assert(tctx, grp_array, "out of memory");
-			copy_group(tctx, &grp, &grp_array[num_grp]);
-			num_grp++;
-		}
-	}
-
-	torture_comment(tctx, "Testing endgrent\n");
-	endgrent();
-
-	if (grp_array_p) {
-		*grp_array_p = grp_array;
-	}
-	if (num_grp_p) {
-		*num_grp_p = num_grp;
-	}
-
 	return true;
 }
 
